{% extends 'base/base.html' %} {% block title %}Attendance Confirmation — QR
Attend{% endblock %} {% block content %}

<div class="row justify-content-center">
  <div class="col-md-6 col-lg-5">
    <div
      class="card"
      style="border-top: 4px solid {% if status == 'success' %}var(--success){% elif status == 'warning' %}var(--warning){% else %}var(--danger){% endif %};"
    >
      <div class="card-body text-center" style="padding: 2.5rem 2rem">
        <!-- Animated Icon -->
        <div
          class="confirm-icon-wrap {% if status == 'success' %}confirm-success{% elif status == 'warning' %}confirm-warning{% else %}confirm-danger{% endif %}"
        >
          {% if status == 'success' %}
          <i class="fas fa-circle-check"></i>
          {% elif status == 'warning' %}
          <i class="fas fa-triangle-exclamation"></i>
          {% else %}
          <i class="fas fa-circle-xmark"></i>
          {% endif %}
        </div>

        <!-- Title -->
        <h4 style="font-weight: 700; margin-bottom: 0.5rem">
          {% if status == 'success' %}Attendance Marked! {% elif status ==
          'warning' %}Already Marked {% else %}Something Went Wrong {% endif %}
        </h4>
        <p
          style="
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 1.75rem;
          "
        >
          {{ message }}
        </p>

        <!-- Class Details -->
        {% if timetable %}
        <div
          style="
            background: var(--surface-alt);
            border-radius: var(--radius-sm);
            padding: 1rem 1.25rem;
            text-align: left;
            margin-bottom: 1.5rem;
          "
        >
          <div
            style="
              font-size: 0.75rem;
              font-weight: 600;
              text-transform: uppercase;
              letter-spacing: 0.05em;
              color: var(--text-muted);
              margin-bottom: 0.75rem;
            "
          >
            Class Details
          </div>
          <div class="detail-row">
            <span class="label">Subject</span>
            <span class="value">{{ timetable.subject.name }}</span>
          </div>
          <div class="detail-row">
            <span class="label">Day</span>
            <span class="value">{{ timetable.day }}</span>
          </div>
          <div class="detail-row">
            <span class="label">Time</span>
            <span class="value"
              >{{ timetable.start_time|time:"g:i A" }} – {{
              timetable.end_time|time:"g:i A" }}</span
            >
          </div>
          <div class="detail-row">
            <span class="label">Batch</span>
            <span class="value">{{ timetable.batch }}</span>
          </div>
        </div>
        {% endif %}

        <!-- Attendance Details -->
        {% if attendance %}
        <div
          style="
            background: var(--surface-alt);
            border-radius: var(--radius-sm);
            padding: 1rem 1.25rem;
            text-align: left;
            margin-bottom: 1.5rem;
          "
        >
          <div
            style="
              font-size: 0.75rem;
              font-weight: 600;
              text-transform: uppercase;
              letter-spacing: 0.05em;
              color: var(--text-muted);
              margin-bottom: 0.75rem;
            "
          >
            Attendance Details
          </div>
          <div class="detail-row">
            <span class="label">Date</span>
            <span class="value">{{ attendance.date|date:"d M Y" }}</span>
          </div>
          <div class="detail-row">
            <span class="label">Time</span>
            <span class="value">{{ attendance.time|time:"g:i A" }}</span>
          </div>
          <div class="detail-row">
            <span class="label">Status</span>
            <span class="value">
              {% if attendance.is_present %}
              <span class="badge bg-success">Present</span>
              {% else %}
              <span class="badge bg-danger">Absent</span>
              {% endif %}
            </span>
          </div>
        </div>
        {% endif %}

        <!-- Actions -->
        <div class="d-flex gap-2 justify-content-center">
          <a href="{% url 'core:home' %}" class="btn btn-primary">
            <i class="fas fa-gauge-high"></i> Dashboard
          </a>
          <a
            href="{% url 'attendance:attendance_list' %}"
            class="btn btn-secondary"
          >
            <i class="fas fa-list-check"></i> View Records
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
