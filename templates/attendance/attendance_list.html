{% extends 'base/base.html' %}

{% block title %}Attendance Records â€” QR Attend{% endblock %}

{% block content %}

<div class="page-header d-flex align-items-center justify-content-between flex-wrap gap-2">
  <div>
    <h2><i class="fas fa-list-check me-2" style="color:var(--primary);"></i>Attendance Records</h2>
    <p>View and review all attendance logs</p>
  </div>
</div>

<div class="card">
  <div class="card-body p-0">
    {% if attendances %}
    <div class="table-responsive">
      <table class="table mb-0">
        <thead>
          <tr>
            <th>Date</th>
            <th>Subject</th>
            <th>Teacher</th>
            <th>Status</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody>
          {% for attendance in attendances %}
          <tr>
            <td><span style="font-weight:500;">{{ attendance.date|date:"d M Y" }}</span></td>
            <td>{{ attendance.timetable.subject.name }}</td>
            <td>{{ attendance.timetable.teacher.user.get_full_name }}</td>
            <td>
              {% if attendance.is_present %}
                <span class="badge bg-success">Present</span>
              {% else %}
                <span class="badge bg-danger">Absent</span>
              {% endif %}
            </td>
            <td style="color:var(--text-muted);font-size:.85rem;">{{ attendance.time|time:"g:i A" }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="empty-state">
      <div class="empty-icon"><i class="fas fa-calendar-xmark"></i></div>
      <h6>No attendance records found</h6>
    </div>
    {% endif %}
  </div>
</div>

{% endblock %}
